spring:
  application:
    name: config-server
  
  profiles:
    active: dev
  
  cloud:
    config:
      server:
        git:
          uri: file:../config-repo
          basedir: target/config-repo
          default-label: main
          skip-ssl-validation: false
          timeout: 5
          clone-on-start: true
          force-pull: true
          refresh-rate: 0
          search-paths: 
            - 'config'
        profile-separator: '-'
  
  security:
    user:
      name: admin
      password: ${CONFIG_PASSWORD:admin}

server:
  port: 8888
  servlet:
    context-path: /
  compression:
    enabled: true
    min-response-size: 1024
  tomcat:
    threads:
      max: 100
      min-spare: 5
    connection-timeout: 60000
  shutdown: graceful

management:
  endpoints:
    web:
      exposure:
        include: health,info
      base-path: /actuator
  endpoint:
    health:
      show-details: when-authorized

logging:
  level:
    root: INFO
    org.springframework: INFO
    org.springframework.cloud: DEBUG
    org.springframework.cloud.config: DEBUG
    org.springframework.web: INFO
    ru.itmo.market: DEBUG
  
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  
  file:
    name: logs/config-server.log
    max-size: 100MB
    max-history: 30
    total-size-cap: 1GB

info:
  app:
    name: ITMO-Market Config Server
    description: Centralized Configuration Management for Microservices
    version: 1.0.0
  company:
    name: ITMO University
    url: https://itmo.ru
